<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="xo">
	<typeAlias alias="map" type="java.util.Map" />
	<typeAlias alias="bus" type="com.kospo.pms.common.base.CiBus" />
	<typeAlias alias="ubus" type="com.kospo.pms.common.base.UnderBus" />
	<typeAlias alias="string" type="java.lang.String" />
	<typeAlias alias="hashmap" type="java.util.HashMap" />


  <resultMap id="ibatorgenerated_BaseResultMap" class="com.kospo.pms.system.Code" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 30 15:49:31 KST 2013.
    -->
    <result column="CODE" property="code" jdbcType="VARCHAR" />
    <result column="CODE_ID" property="codeId" jdbcType="VARCHAR" />
    <result column="CODE_NAME" property="codeName" jdbcType="VARCHAR" />
    <result column="CODE_DESC" property="codeDesc" jdbcType="VARCHAR" />
    <result column="CODE_ID_NAME" property="codeIdName" jdbcType="VARCHAR" />
    <result column="CODE_ID_DESC" property="codeIdDesc" jdbcType="VARCHAR" />
    <result column="CODE_GROUP" property="codeGroup" jdbcType="VARCHAR" />
    <result column="USE_YN" property="useYn" jdbcType="CHAR" />
    <result column="SORT_ORDER" property="sortOrder" jdbcType="DECIMAL" />
    <result column="REGISTER_ID" property="registerId" jdbcType="VARCHAR" />
    <result column="REGISTER_DATE" property="registerDate" jdbcType="TIMESTAMP" />
    <result column="UPDATE_ID" property="updateId" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="TIMESTAMP" />
    
    <result column="totalCnt" property="totalCnt" jdbcType="DECIMAL" />
  </resultMap>


	<sql id="top_pager">
		SELECT * FROM (
		SELECT ROWNUM_.* , ROWNUM AS RNUM FROM
		(
	</sql>

	<sql id="bottom_pager">
		) ROWNUM_
		WHERE #pageEnd# >= ROWNUM
		) WHERE RNUM > #pageStart#
	</sql>


	<select id="xo.listCode" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.kospo.pms.system.Code">
		<include refid="top_pager" />
		
			
			SELECT code_id
			     , code
			     , code_name
			     , code_desc
			     , code_id_name
			     , code_id_desc
			     , code_group
			     , use_yn
			     , register_id
			     , register_date
			     , update_id
			     , update_date
			     , sort_order
			     , count(*) over() as totalCnt
			  FROM code
			  WHERE 1=1
		<isNotEmpty property="s_code_search">
			AND ( code_name LIKE '%' || #s_code_search# || '%'  OR code_id_name LIKE '%' || #s_code_search# || '%' )
		</isNotEmpty>		     
		order by code_id, sort_order, code 
		<include refid="bottom_pager" />
		
	</select>

	<select id="xo.selectCode" resultMap="ibatorgenerated_BaseResultMap" parameterClass="map">
	
			SELECT bbs_id
			     , thread_id
			     , parent_id
			     , thread_title
			     , thread
			     , read_count
			     , thumbup_count
			     , start_date
			     , end_date
			     , top_yn
			     , sort_order
			     , use_yn
			     , register_id
    		 	 , to_char(register_date, 'yyyy-MM-dd hh24:mi') register_date
			     , update_id
			     , update_date
			  FROM bbs
			  WHERE  thread_id = # thread_id #

	</select>




</sqlMap>
